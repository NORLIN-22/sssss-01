<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>插画绘画 - Norlin Design</title>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Dots&family=Noto+Sans+TC:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/animations.css">
    <link rel="stylesheet" href="../../css/responsive.css">
    <link rel="stylesheet" href="../../css/page-illustration.css">
    <link rel="stylesheet" href="../../css/illustration-fix.css">
    <link rel="icon" type="image/svg+xml" href="../../favicon.svg">
</head>
<body>
    <!-- 导航菜单 -->
    <nav class="nav-menu">
        <a href="../../index.html" class="nav-logo">
            <img src="../../favicon.svg" alt="Norlin Logo">
        </a>
        <div class="nav-links">
            <a href="../../index.html" class="nav-item">首页</a>
            <a href="../about.html" class="nav-item">简介</a>
            <div class="nav-dropdown">
                <a class="nav-item">项目</a>
                <div class="dropdown-content">
                    <a href="graphics.html" class="dropdown-item">平面设计</a>
                    <a href="illustration.html" class="dropdown-item">插画绘画</a>
                    <a href="frontend.html" class="dropdown-item">前端相关</a>
                </div>
            </div>
            <a href="../contact.html" class="nav-item">联系</a>
        </div>
        <a href="https://portfolio-843.pages.dev/#intro" 
           class="portfolio-link nav-item" 
           target="_blank" 
           rel="noopener"
           title="建议打开VPN">
            旧版作品集
        </a>
    </nav>

    <!-- 主要内容区域 -->
    <main class="content-container">
        <!-- 添加首页头图背景 -->
        <div class="hero-section">
            <img src="../../assets/png/illustration/2.png" alt="插画背景图" class="hero-image">
            <!-- 添加标题图片 -->
            <img src="../../assets/png/illustration/1.png" alt="插画标题" class="title-image">
        </div>
        
        <!-- 添加xianmu.svg，放在首页头图下方 -->
        <div class="project-section">
            <object class="project-svg" data="../../assets/svg/illustration/xianmu.svg" type="image/svg+xml"></object>
        </div>
        
        <!-- 修改作品展示区域结构，实现水平排列 -->
        <div class="artwork-section">
            <!-- 图片 -->
            <img src="../../assets/png/illustration/xxqb.jpg" alt="插画作品" class="artwork-image">
            
            <!-- SVG和按钮的容器 -->
            <div class="artwork-svg-container">
                <!-- SVG -->
                <object class="artwork-svg" data="../../assets/svg/illustration/xmbj.svg" type="image/svg+xml"></object>
                
                <!-- 修改哔哩哔哩按钮，确保链接功能正常 -->
                <a href="https://www.bilibili.com/bangumi/play/ep766292?spm_id_from=333.337.0.0" 
                   target="_blank" 
                   rel="noopener" 
                   class="bilibili-link">
                    <!-- 使用img标签替代object标签，避免嵌套问题 -->
                    <img class="bilibili-button" src="../../assets/svg/illustration/billbill-viode.svg" alt="观看哔哩哔哩视频">
                </a>
            </div>
        </div>

        <!-- 添加流程图部分 -->
        <div class="flow-chart-section">
            <object class="flow-chart-svg" data="../../assets/svg/illustration/liucheng.svg" type="image/svg+xml"></object>
        </div>

        <!-- 添加完成图部分 -->
        <div class="completion-section">
            <img src="../../assets/png/illustration/wancheng.png" alt="作品完成图" class="completion-image" id="completionImage">
        </div>
        
        <!-- 添加原片SVG和视频组合区域 -->
        <div class="media-section">
            <div class="media-container">
                <!-- 原片SVG -->
                <object class="yuanpian-svg" data="../../assets/svg/illustration/yuanpian.svg" type="image/svg+xml"></object>
                
                <!-- 视频部分 -->
                <video class="process-video" controls muted>
                    <source src="../../assets/video/gongs.mp4" type="video/mp4">
                    您的浏览器不支持视频标签。
                </video>
            </div>
        </div>
        
        <!-- 添加同人图标题 SVG -->
        <div class="project-section tongreng-section">
            <object class="project-svg" data="../../assets/svg/illustration/tongreng.svg" type="image/svg+xml"></object>
        </div>
        
        <!-- 修改同人插画图片展示区域 - 修正图片路径和格式 -->
        <div class="fanart-gallery">
            <div class="fanart-container">
                <!-- 使用统一的图片格式 - 尝试使用jpg格式 -->
                <img src="../../assets/png/illustration/tonrenchatu/1.jpg" alt="同人插画作品1" class="fanart-image">
                <img src="../../assets/png/illustration/tonrenchatu/2.jpg" alt="同人插画作品2" class="fanart-image">
                <img src="../../assets/png/illustration/tonrenchatu/4.jpg" alt="同人插画作品4" class="fanart-image">
                <img src="../../assets/png/illustration/tonrenchatu/5.jpg" alt="同人插画作品5" class="fanart-image">
                <img src="../../assets/png/illustration/tonrenchatu/6.jpg" alt="同人插画作品6" class="fanart-image">
                <img src="../../assets/png/illustration/tonrenchatu/7.jpg" alt="同人插画作品7" class="fanart-image">
                <img src="../../assets/png/illustration/tonrenchatu/8.jpg" alt="同人插画作品8" class="fanart-image">
                <img src="../../assets/png/illustration/tonrenchatu/9.jpg" alt="同人插画作品9" class="fanart-image">
                <img src="../../assets/png/illustration/tonrenchatu/10.jpg" alt="同人插画作品10" class="fanart-image">
                <img src="../../assets/png/illustration/tonrenchatu/11.jpg" alt="同人插画作品11" class="fanart-image">
                
                <!-- 添加图片加载错误处理脚本 -->
                <script>
                    // 处理图片加载错误
                    document.querySelectorAll('.fanart-image').forEach(img => {
                        img.onerror = function() {
                            console.log('尝试加载另一种格式: ' + this.src);
                            
                            // 如果jpg加载失败，尝试png格式
                            if(this.src.endsWith('.jpg')) {
                                this.src = this.src.replace('.jpg', '.png');
                            } 
                            // 如果png加载失败，尝试jpeg格式
                            else if(this.src.endsWith('.png')) {
                                this.src = this.src.replace('.png', '.jpeg');
                            }
                            // 如果还是失败，就隐藏这个图片
                            else {
                                this.style.display = 'none';
                            }
                        };
                    });
                </script>
            </div>
        </div>
        
        <!-- 添加全屏查看器 -->
        <div class="fullscreen-viewer" id="imageViewer">
            <button class="close-viewer" id="closeViewer">&times;</button>
            <img src="../../assets/png/illustration/wancheng.png" alt="作品完成图" class="fullscreen-image">
        </div>

    </main>

    <!-- 更新脚本部分，支持同人图点击预览 -->
    <script>
        // 获取元素
        const completionImage = document.getElementById('completionImage');
        const imageViewer = document.getElementById('imageViewer');
        const closeViewer = document.getElementById('closeViewer');
        const fullscreenImage = document.querySelector('.fullscreen-image');
        
        // 点击完成图打开查看器
        completionImage.addEventListener('click', function() {
            openViewer(this.src);
        });
        
        // 点击同人图打开查看器
        document.querySelectorAll('.fanart-image').forEach(image => {
            image.addEventListener('click', function() {
                openViewer(this.src);
            });
        });
        
        // 打开查看器函数
        function openViewer(imageSrc) {
            fullscreenImage.src = imageSrc;
            imageViewer.classList.add('active');
            document.body.style.overflow = 'hidden'; // 防止背景滚动
        }
        
        // 点击关闭按钮关闭查看器
        closeViewer.addEventListener('click', function() {
            imageViewer.classList.remove('active');
            document.body.style.overflow = ''; // 恢复滚动
        });
        
        // 点击背景关闭查看器
        imageViewer.addEventListener('click', function(e) {
            if (e.target === imageViewer) {
                imageViewer.classList.remove('active');
                document.body.style.overflow = ''; // 恢复滚动
            }
        });
        
        // ESC键关闭查看器
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && imageViewer.classList.contains('active')) {
                imageViewer.classList.remove('active');
                document.body.style.overflow = ''; // 恢复滚动
            }
        });
    </script>
</body>
</html>
